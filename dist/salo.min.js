function x(g,c){function y(){}function l(a){g.set("sendHitTask",a||m)}function n(a,b){l(t);return a&&g.send("exception",{exDescription:"salo.js - "+b+":"+a.message,nonInteraction:!0,exFatal:!1})}function z(a,b){b||(u++,b=A(a)&&B(a));if(!b||!k&&C(b)){var d=h.setTimeout(function(){d=d&&v(!1)},p),f=a.get("hitCallback")||y;a.set("hitCallback",function D(){try{d&&(d=h.clearTimeout(d));if(b){var a=b;e.b(a);e.b(a+"lock")}f&&(v(!0),f())}catch(c){n(c,D)}f=q},!0);u--;k++;t(a)}}function v(a){k--;return a&&w()||
h.setTimeout(w,p)}function m(a,b){try{z(a,b)}catch(d){n(d,m)}}function A(a){for(var b,d=!1,f=r.length;!d&&f--;){b=r[f];var d=!0,c;for(c in b)a.get(c)!=b[c]&&(d=!1)}return d&&b}function B(a){var b="hit"+(new h.Date).getTime();a=a.get("hitPayload");return e.set(b,a,{a:E})&&b}function w(){if(!(0<k))for(var a=e.index(),b=0;b<a.length;){var d=a[b++],c=d.match(/^hit(\d+)$/);if(c){var c=parseInt(c[1],10),c=(new h.Date).getTime()-c,g=e.get(d);m(F({transport:G,transportUrl:H,hitPayload:g+"&qt="+c}),d)}}}function C(a){a+=
"lock";if(e.get(a))return!1;e.set(a,1,{a:p});return!0}function F(a){return{get:function(b){return a[b]},set:function(b,c){a[b]=c}}}var q,I={enable:l,disable:n,watch:function(a){r.push(a)}},r=[{useSalo:!0,useBeacon:!1,hitCallback:q,transport:q}],u=0,k=0;c=c||{};var E=c.storageTimeout||108E5,p=c.transportTimeout||5E3,G=c.transportMethod||"image",H=c.transportUrl||"//www.google-analytics.com/collect",h=c.timing||window,e=c.storage||window.simpleStorage,t=g.get("sendHitTask");l();return I}
"undefined"!==typeof exports&&(module.c=x);